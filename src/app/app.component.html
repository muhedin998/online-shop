<div class="min-h-dvh flex flex-col">
  <!-- Header -->
  <header class="sticky top-0 z-30 bg-accent-900 text-white shadow-glow">
    <div class="px-4 py-3 flex items-center gap-3">
      <div class="flex-1 flex items-center gap-3 min-w-0">
        <div class="h-9 w-9 rounded-xl bg-white/20 flex items-center justify-center animate-float shadow-glow" *ngIf="!searchOpen()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
            <path d="M3 7.5A2.5 2.5 0 0 1 5.5 5h13A2.5 2.5 0 0 1 21 7.5V9H3V7.5Z"/>
            <path fill-rule="evenodd" d="M3 10.5h18v6A2.5 2.5 0 0 1 18.5 19h-13A2.5 2.5 0 0 1 3 16.5v-6Zm7.5 2.25a.75.75 0 0 0-1.5 0v3a.75.75 0 0 0 1.5 0v-3Zm4.5 0a.75.75 0 0 0-1.5 0v3a.75.75 0 0 0 1.5 0v-3Z" clip-rule="evenodd"/>
          </svg>
        </div>
        <div *ngIf="!searchOpen()" class="transition-all duration-300">
          <h1 class="text-lg font-bold tracking-wide">BarberShop</h1>
          <p class="text-xs text-white/80 -mt-0.5">Ulja • Balzami • Nega</p>
        </div>

        <!-- Search input (animated replace) -->
        <div *ngIf="searchOpen()" class="flex-1 animate__animated animate__fadeInDown">
          <div class="relative">
            <input #searchInput type="search" [value]="search.query()" (input)="onSearch($event)" placeholder="Pretraži proizvode..."
                   class="w-full rounded-xl bg-white text-gray-900 px-4 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-brand-300 shadow-sm" />
            <button (click)="closeSearch()" class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700" aria-label="Zatvori pretragu">✕</button>
          </div>
        </div>
      </div>

      <nav class="hidden sm:flex items-center gap-3">
        <a routerLink="/" (click)="onHomeClick($event)" routerLinkActive="!text-yellow-200" class="px-3 py-1.5 rounded-md hover:bg-white/10 transition">Početna</a>
        <a routerLink="/omiljeni" routerLinkActive="!text-yellow-200" class="px-3 py-1.5 rounded-md hover:bg-white/10 transition">Omiljeni <span class="ml-1 text-xs bg-white/20 px-1.5 rounded">{{ favCount() }}</span></a>
        <a routerLink="/korpa" routerLinkActive="!text-yellow-200" class="px-3 py-1.5 rounded-md hover:bg-white/10 transition">Korpa <span class="ml-1 text-xs bg-white/20 px-1.5 rounded">{{ cartCount() }}</span></a>
      </nav>

      <!-- Search toggle -->
      <button (click)="toggleSearch()" class="ml-2 rounded-lg p-2 hover:bg-white/10 transition" aria-label="Pretraga">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"/>
        </svg>
      </button>
    </div>
  </header>

  <!-- Content -->
  <main class="flex-1 container mx-auto px-4 py-6">
    <router-outlet></router-outlet>
  </main>

  <!-- Bottom Nav (Mobile) -->
  <nav class="sm:hidden sticky bottom-0 z-30 bg-white/95 border-t border-gray-200 backdrop-blur supports-[backdrop-filter]:glass">
    <div class="grid grid-cols-4 text-sm">
      <a routerLink="/" (click)="onHomeClick($event)" routerLinkActive="text-brand-600" class="flex flex-col items-center py-2.5">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955a1.125 1.125 0 011.592 0L21.75 12M4.5 9.75V20.25A1.5 1.5 0 006 21.75h12a1.5 1.5 0 001.5-1.5V9.75"/></svg>
        <span>Početna</span>
      </a>
      <a routerLink="/omiljeni" routerLinkActive="text-brand-600" class="relative flex flex-col items-center py-2.5">
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M11.645 20.91l-.007-.003-.026-.012a15.247 15.247 0 01-.41-.2 25.18 25.18 0 01-4.17-2.703C4.688 15.798 2.25 13.235 2.25 10.5 2.25 8.014 4.264 6 6.75 6c1.35 0 2.613.586 3.5 1.52A4.75 4.75 0 0117.25 6c2.486 0 4.5 2.014 4.5 4.5 0 2.736-2.438 5.299-4.782 7.495a25.18 25.18 0 01-4.17 2.703 15.247 15.247 0 01-.41.2l-.026.012-.007.003-.003.001a.75.75 0 01-.597 0l-.003-.001z"/></svg>
        <span>Omiljeni</span>
        <span *ngIf="favCount()" class="absolute top-1.5 right-7 text-[10px] px-1.5 rounded-full bg-brand-600 text-white">{{ favCount() }}</span>
      </a>
      <a routerLink="/korpa" routerLinkActive="text-brand-600" class="relative flex flex-col items-center py-2.5">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 2.25h1.386a1.5 1.5 0 011.46 1.126l.383 1.53M7.5 14.25h9.75a2.25 2.25 0 002.2-1.747L20.86 7.5H5.25m2.25 6.75L5.479 4.906A1.5 1.5 0 003.997 3.75H2.25m5.25 10.5L6 18.75m12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM9 18.75a.75.75 0 11-1.5 0A.75.75 0 019 18.75z"/></svg>
        <span>Korpa</span>
        <span *ngIf="cartCount()" class="absolute top-1.5 right-6 text-[10px] px-1.5 rounded-full bg-brand-600 text-white">{{ cartCount() }}</span>
      </a>
      <a routerLink="/profil" routerLinkActive="text-brand-600" class="flex flex-col items-center py-2.5">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.5 20.25a8.25 8.25 0 1115 0v.75H4.5v-.75z"/></svg>
        <span>Profil</span>
      </a>
    </div>
  </nav>
</div>
